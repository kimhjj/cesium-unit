<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- Include the CesiumJS JavaScript and CSS files -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        body {
            margin: 0px;
            padding: 0px;
            height: 100%;
        }
        p {
            margin: 0 0 10px 0;
        }
        .content {
            position: absolute;
            top: 0px;
            left: 0px;
            margin: 8px;
            padding: 0 10px;
            width: 300px;
            height: 480px;
            background-color: antiquewhite;
            border: 1px dashed cadetblue;
        }
        .content > div {
            padding: 10px 0;
        }
        .content > div:not(:first-child) {
            border-top: 1px dashed gray;
            padding-top: 10px;
        }
        .none-display {
            display: none;
        }
        #cesiumContainer {
            position: absolute;
            top: 0px;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>
	<div class="content">
        <div>
            <button onclick="moveTo('loc1')">위치1</button>
            <button onclick="moveTo('loc2')">위치2</button>
            <button onclick="moveTo('loc3')">위치3</button>
        </div>
        <div>
            <button onclick="saveUserPosition()">현재 위치를 첫 화면으로 지정</button>
            <button onclick="deleteUserPosition()">위치 초기화</button>
        </div>
        <div>
            <p>전체 CCTV</p>
            <button onclick="loadCone()">조명 On</button>
            <button onclick="clearCone()">조명 Off</button>
        </div>
        <div id="not-selected-cctv" style="background-color: lightgray;">
            <p>CCTV 객체를 선택해주세요.</p>
            <div>
                <button disabled>조명 On</button>
                <button disabled>조명 Off</button>
            </div>
            <div>
                <span>회전 <input disabled id="moveDegreeHidden" type="text" value="10" size="1" />도</span>
                <button disabled>시계방향</button>
                <button disabled>반시계방향</button>
            </div>
        </div>
        <div id="selected-cctv" style="display: none;">
            <p>선택된 CCTV 제어</p>
            <div>
                <button onclick="loadLOS()">조명 On</button>
                <button onclick="clearLOS()">조명 Off</button>
            </div>
            <div>
                <span>회전 <input type="text" id="moveDegree" value="10" size="1" maxlength="3" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />도</span>
                <button onclick="rotate(1)">시계방향</button>
                <button onclick="rotate(-1)">반시계방향</button>
            </div>
        </div>
        <div style="font-size: 14px;">
            <p>CCTV 추가</p>
            <div>
                위도<input type="text" id="addLon" size="7" value="129.285343" />
                경도<input type="text" id="addLat" size="7" value="35.40664" />
                <button onclick="addCCTV()">추가</button>
            </div>
        </div>
        <div style="font-size: 14px;">
            <p>위치 확인</p>
            <div>
                <button onclick="getCenter()">현재 중심 좌표</button>
            </div>
        </div>
        <!-- <div style="font-size: 14px;">
            <p>[TODO] 할일</p>
            <ul>
                <li>콘을 DB로?</li>
                <li>전방향 조명 추가</li>
                <li>차폐 영역 부피 계산 가능한지</li>
            </ul>
        </div>
        <div style="font-size: 14px;">
            <p>[TODO] 수정 필요 버그들</p>
            <ul>
                <li></li>
            </ul>
        </div> -->
	</div>
    <script>
        const LENS_DISTANCE = 0.00036 ;   // 20cm
        const MOVE_DISTANCE = 0.003 ;   // 3m
        const CCTV_HEIGHT = 3.6;
        const CCTV_DEFAULT_DEGREE = 30;
        const CIRCLE_RADIUS = 2.0;
        const CIRCLE_DENSITY = 0.020;
        const FACTOR = 6371.0088;

        let selectedCCTV = null;

        Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzYTM3ODhlNC1jOWUxLTRhOTYtYTgwZC1iMDA3OGJiMTQwZDciLCJpZCI6MTI5NDU5LCJpYXQiOjE2ODIwNTc4NjN9.GC-W9QfAFa9rXMh2Ow2rSC5UvLcwtS_qjWJ1v454z1A';

        // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
        const viewer = new Cesium.Viewer('cesiumContainer');
        viewer.terrainProvider = new Cesium.CesiumTerrainProvider({
            url: "http://175.197.92.213:10502/ujterrain"
        });
        const tileset = viewer.scene.primitives.add(new Cesium.Cesium3DTileset({
            url: "http://175.197.92.213:10502/static/ujdataset/bldglod2/tileset.json",
        }));
        tileset.style = new Cesium.Cesium3DTileStyle({
            color: "color('#FFFFFF', 1)"
        })
        viewer.imageryLayers.addImageryProvider(
            new Cesium.WebMapTileServiceImageryProvider({
                url: `http://175.197.92.213:10502/static/ujdataset/ujrealortho/{TileMatrix}/{TileCol}/{TileRow}.png`,
                layer: "",
                style: "",
                tileMatrixSetID: "",
            }), (1)
        );
        viewer.scene.globe.depthTestAgainstTerrain = true;
        
        const model = {
            assetId: 1626783,
            dataList: [
                // {x: 128.119267, y: 35.56915, z: 0, h: 0, p: 0, r: 0},
                // {x: 128.121006, y: 35.566706, z: 0, h: 0, p: 0, r: 0},
                // {x: 128.121006, y: 35.566706, z: 0, h: 0, p: 0, r: 0},
                // {x: 128.121006, y: 35.566706, z: 0, h: 0, p: 0, r: 0},
                // {x: 128.121006, y: 35.566706, z: 0, h: 0, p: 0, r: 0},
                // {x: 128.121006, y: 35.566706, z: 0, h: 0, p: 0, r: 0},
                // {x: 128.140953, y: 35.54945, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.00984, y: 35.534127, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.010017, y: 35.532251, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.011111, y: 35.547075, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.031432, y: 35.595292, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.046696, y: 35.616358, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.049045, y: 35.634551, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.049082, y: 35.618792, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.059901, y: 35.641375, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.068535, y: 35.61545, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.074217, y: 35.599787, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.076373, y: 35.590674, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.077557, y: 35.607042, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.077671, y: 35.58317, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.079035, y: 35.669135, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.079329, y: 35.507298, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.079743, y: 35.503969, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.079931, y: 35.509455, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.08128, y: 35.590819, z: 0, h: 240, p: 0, r: 0},
                // {x: 129.081911, y: 35.506598, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.082313, y: 35.511088, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.082472, y: 35.693931, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.082559, y: 35.508774, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.082621, y: 35.506694, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.083245, y: 35.508325, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.083805, y: 35.571121, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.084008, y: 35.525771, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.084076, y: 35.672271, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.084173, y: 35.584885, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.084639, y: 35.587583, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.084796, y: 35.584772, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.085071, y: 35.579547, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.085433, y: 35.506113, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.086145, y: 35.511298, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.086182, y: 35.669987, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.086258, y: 35.508742, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.086358, y: 35.510377, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.086813, y: 35.573592, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.086991, y: 35.506474, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.087935, y: 35.503653, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.08812, y: 35.51032, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.089032, y: 35.591356, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.090713, y: 35.531229, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.092424, y: 35.507092, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.093069, y: 35.588086, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.095012, y: 35.552112, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.095581, y: 35.521097, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.09635, y: 35.575011, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.097426, y: 35.593522, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.097505, y: 35.523877, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.098941, y: 35.582473, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.10028, y: 35.582579, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.104368, y: 35.498814, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.104368, y: 35.498814, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.106313, y: 35.590751, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.106668, y: 35.51859, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.106668, y: 35.51859, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.106848, y: 35.540243, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.107202, y: 35.543947, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.10736, y: 35.572181, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.107537, y: 35.548427, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.107537, y: 35.548427, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.107537, y: 35.548427, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.107537, y: 35.548427, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.107537, y: 35.548427, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.107537, y: 35.548427, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.107689, y: 35.525402, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.10817, y: 35.536637, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.108343, y: 35.569116, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.108489, y: 35.535635, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.109139, y: 35.537618, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.109504, y: 35.535532, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.109949, y: 35.539978, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.110303, y: 35.596627, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.110303, y: 35.596627, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.110564, y: 35.56706, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.110711, y: 35.568033, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.110711, y: 35.568033, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.110711, y: 35.568033, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.110764, y: 35.559841, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.110999, y: 35.56652, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.11132, y: 35.569244, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.111681, y: 35.567822, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112068, y: 35.565326, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112068, y: 35.565326, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112148, y: 35.553167, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112164, y: 35.565522, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112234, y: 35.566582, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112318, y: 35.553335, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112418, y: 35.567723, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112421, y: 21.556562, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112502, y: 35.566871, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112526, y: 35.551717, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112677, y: 35.556561, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.112975, y: 35.556393, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.113035, y: 35.565514, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.113546, y: 35.558584, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.113681, y: 35.555053, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.113983, y: 35.559652, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114377, y: 35.566667, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114424, y: 35.545695, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.114473, y: 35.562155, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114492, y: 35.565916, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114503, y: 35.558145, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114571, y: 35.552458, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114603, y: 35.561848, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.114882, y: 35.549284, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115167, y: 35.553717, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115175, y: 35.566675, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115253, y: 35.559704, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115441, y: 35.568077, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115544, y: 35.55378, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115552, y: 35.545851, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115708, y: 35.565958, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.115884, y: 35.556366, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116061, y: 35.562834, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116137, y: 35.549234, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.116208, y: 35.565494, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116418, y: 35.562327, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.11655, y: 35.556519, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116592, y: 35.566958, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116645, y: 35.563007, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.116661, y: 35.554659, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116699, y: 35.562899, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.116909, y: 35.554762, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.116938, y: 35.561022, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.117095, y: 35.568505, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.117208, y: 35.561189, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.117379, y: 35.552107, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.117428, y: 35.556784, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.117531, y: 35.569361, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.117709, y: 35.530247, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.11799, y: 35.559402, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.118197, y: 35.565802, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.118362, y: 35.556648, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.118733, y: 35.538445, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.118818, y: 35.568439, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.119011, y: 35.549467, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.119186, y: 35.569399, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.119518, y: 35.571262, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.119586, y: 35.566693, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.119946, y: 35.559946, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.120235, y: 35.560011, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.120472, y: 35.56628, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.120493, y: 35.568806, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.12098, y: 35.585265, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.121006, y: 35.566706, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.121439, y: 35.572878, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.121558, y: 35.566017, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.121805, y: 35.562288, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.12184, y: 35.572638, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.122113, y: 35.563599, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.122323, y: 35.574895, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.122415, y: 35.567447, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.122564, y: 35.554895, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.123008, y: 35.570596, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123055, y: 35.561575, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123061, y: 35.571657, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123212, y: 35.563834, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123283, y: 35.570904, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123303, y: 35.560333, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123332, y: 35.572993, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123575, y: 35.5429, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123591, y: 35.573488, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.12361, y: 35.560869, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123683, y: 35.565936, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.123841, y: 35.566433, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.124578, y: 35.571012, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.125334, y: 35.583359, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.125377, y: 35.572363, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.12538, y: 35.565873, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.125569, y: 35.566871, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.125647, y: 35.564357, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.125762, y: 35.561441, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.125762, y: 35.561441, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.126012, y: 35.563838, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126165, y: 35.571476, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126205, y: 35.568938, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.12623, y: 35.565171, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126313, y: 35.565645, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126366, y: 35.566718, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126406, y: 35.568807, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126576, y: 35.570884, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126643, y: 35.558085, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.126737, y: 35.570675, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126836, y: 35.572694, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.126871, y: 35.564855, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.127036, y: 35.566225, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.127618, y: 35.56384, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.127905, y: 35.570396, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.127937, y: 35.555968, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.127938, y: 35.555904, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.128238, y: 35.565527, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.128404, y: 35.56164, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.128415, y: 35.553691, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.128628, y: 35.563974, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.129491, y: 35.564002, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.129933, y: 35.558895, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.129977, y: 35.56151, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.130247, y: 35.563515, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.130275, y: 35.563849, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.130841, y: 35.559278, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.130859, y: 35.540336, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.131091, y: 35.556992, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.131654, y: 35.503968, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.131964, y: 35.479553, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.132098, y: 35.564372, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.132776, y: 35.563164, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.132956, y: 35.58126, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.132956, y: 35.58126, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.133614, y: 35.541792, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.134401, y: 35.57505, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.135472, y: 35.596253, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.135976, y: 35.556282, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.135976, y: 35.556282, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.137691, y: 35.557981, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.139115, y: 35.508982, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.140857, y: 35.589368, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.140857, y: 35.602698, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.142389, y: 35.547205, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.142389, y: 35.547205, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.143947, y: 35.603283, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.148318, y: 35.616452, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.149456, y: 35.511811, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.152478, y: 35.554705, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.153321, y: 35.548951, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.153925, y: 35.64248, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.157191, y: 35.52206, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.157673, y: 35.705102, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.157689, y: 35.611998, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.158144, y: 35.544774, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.158165, y: 35.643444, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.158286, y: 35.523599, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.159113, y: 35.642689, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.159129, y: 35.515396, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.160662, y: 35.641163, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.161829, y: 35.6281, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.162778, y: 35.523318, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.163576, y: 35.685809, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.164213, y: 35.548104, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.166761, y: 35.462472, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.167016, y: 35.656946, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.168366, y: 35.507537, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.172488, y: 35.468715, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.175963, y: 35.437269, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.176166, y: 35.675465, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.177111, y: 35.457487, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.177716, y: 35.458097, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.177733, y: 35.553702, z: 0, h: 240, p: 0, r: 0},
                // {x: 129.177788, y: 35.67467, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.178196, y: 35.489163, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.178257, y: 35.43223, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.178259, y: 35.553844, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.178875, y: 35.650658, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.181617, y: 35.556412, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.18271, y: 35.55539, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.182792, y: 35.550035, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.183755, y: 35.460421, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.183968, y: 35.559034, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.185924, y: 35.512255, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.189943, y: 35.559063, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.192392, y: 35.563481, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.195297, y: 35.458979, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.195389, y: 35.565459, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.195725, y: 35.457944, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.195896, y: 35.457148, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.198226, y: 35.506892, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.198366, y: 35.656149, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.200076, y: 35.452024, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.200251, y: 35.714737, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.202007, y: 35.654018, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.202392, y: 35.572995, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.203297, y: 35.426439, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.205102, y: 35.464773, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.205447, y: 35.668699, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.205639, y: 35.651001, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.206229, y: 35.575771, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.207159, y: 35.650852, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.207538, y: 35.464687, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.208259, y: 35.46725, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.208445, y: 35.464811, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.208862, y: 35.572233, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.208862, y: 35.572233, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.209166, y: 35.465651, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.211658, y: 35.466827, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.212786, y: 35.489659, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.212847, y: 35.431255, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.213721, y: 35.444095, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.213815, y: 35.595672, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.215942, y: 35.485722, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.216985, y: 35.483242, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.21933, y: 35.634355, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.219644, y: 35.429171, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.220084, y: 35.627231, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.221649, y: 35.563215, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.222292, y: 35.564143, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.222377, y: 35.561244, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.222377, y: 35.561819, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.222718, y: 35.565922, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.222994, y: 35.560858, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.223355, y: 35.438562, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.223838, y: 35.561498, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.223856, y: 35.574063, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.224113, y: 35.56286, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.224133, y: 35.560536, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.224419, y: 35.562742, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.224658, y: 35.563359, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.224843, y: 35.439026, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.224893, y: 35.439056, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.225688, y: 35.560949, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.225925, y: 35.561754, z: 0, h: 240, p: 0, r: 0},
                // {x: 129.225925, y: 35.561754, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.225925, y: 35.561754, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.226098, y: 35.563186, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.226901, y: 35.671555, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.227771, y: 35.563529, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.228039, y: 35.564076, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.228185, y: 35.563775, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.228708, y: 35.585821, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.228724, y: 34.561235, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.228724, y: 35.561235, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.228724, y: 35.561235, z: 0, h: 240, p: 0, r: 0},
                // {x: 129.228724, y: 35.561235, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.228724, y: 35.561235, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.228724, y: 35.561235, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.229401, y: 35.653626, z: 0, h: 1200, p: 0, r: 0},
                // {x: 129.229433, y: 35.561728, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.229797, y: 35.564479, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.229948, y: 35.562595, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.230253, y: 35.56405, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.230507, y: 35.565391, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.230517, y: 35.563552, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.230676, y: 35.562419, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.231424, y: 35.566611, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.232253, y: 35.579134, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.232344, y: 35.564883, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.232582, y: 35.561358, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.232918, y: 35.440361, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.233326, y: 35.599602, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.233464, y: 35.492016, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.233826, y: 35.477518, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.234223, y: 35.567103, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.234303, y: 35.492818, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.234668, y: 35.473548, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.234701, y: 35.57911, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.234928, y: 35.529847, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.235461, y: 35.582227, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.235467, y: 35.508377, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.235636, y: 35.565852, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.236009, y: 35.576736, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.236009, y: 35.576736, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.236294, y: 35.509138, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.236688, y: 35.578057, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.237064, y: 35.508546, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.237185, y: -281.424714, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.237185, y: -281.424714, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.237185, y: -281.424714, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.237187, y: 35.572881, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.23752, y: 35.577608, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.237693, y: 35.570721, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.237759, y: 35.571342, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.238467, y: 35.575769, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.238467, y: 35.575769, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.238741, y: 35.569192, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.239148, y: 35.572823, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.239504, y: 35.575406, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.239507, y: 35.575404, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.239539, y: 35.576133, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.239736, y: 35.577306, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.239831, y: 35.528621, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.239856, y: 35.577045, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.239856, y: 35.577045, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.240041, y: 35.567925, z: 0, h: 0, p: 0, r: 0},
                {x: 129.240401, y: 35.569923, z: 0, h: 150, p: 0, r: 0},      // 위치1
                {x: 129.239904, y: 35.574015, z: 0, h: 60, p: 0, r: 0},      // 위치2
                {x: 129.240784, y: 35.575608, z: 0, h: 270, p: 0, r: 0},      // 위치3
                {x: 129.240742, y: 35.575833, z: 0, h: 30, p: 0, r: 0},      // 위치3
                {x: 129.241029, y: 35.575944, z: 0, h: 90, p: 0, r: 0},      // 위치3
                {x: 129.241146, y: 35.575710, z: 0, h: 180, p: 0, r: 0},      // 위치3
                // {x: 129.240664, y: 35.518541, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.240705, y: 35.527506, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.240811, y: 35.573259, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.241387, y: 35.578592, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.241568, y: 35.568935, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.241806, y: 35.57067, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.241835, y: 35.499971, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.24221, y: 34.571098, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.242512, y: 35.568187, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.242696, y: 35.527467, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.242725, y: 35.568246, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.244252, y: 35.569162, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.244617, y: 34.569072, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.24471, y: 35.568321, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.244757, y: 35.576716, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.244844, y: 35.395135, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.245021, y: 35.569878, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.245093, y: 35.526335, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.246274, y: 35.528427, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.246436, y: 35.568881, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.246544, y: 35.567515, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.246747, y: 35.571141, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.246914, y: 35.567033, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.247297, y: 35.517026, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.247684, y: 35.569268, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.247727, y: 35.566906, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.248101, y: 35.569611, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.248544, y: 35.562725, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.249327, y: 35.568088, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.24941, y: 35.56641, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.249502, y: 35.566867, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.249647, y: 35.569078, z: 0, h: 240, p: 0, r: 0},
                // {x: 129.249707, y: 35.568076, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.249777, y: 35.549065, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.250292, y: 35.570759, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.250382, y: 35.568222, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.25054, y: 35.55207, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.250565, y: 35.566259, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.250567, y: 35.565432, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.250652, y: 35.397886, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.25091, y: 35.569625, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.251083, y: 35.567148, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.251835, y: 35.551729, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.252253, y: 35.553012, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.252391, y: 35.553417, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.252932, y: 35.550752, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.253047, y: 35.551659, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.253084, y: 35.553051, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.253468, y: 35.43255, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.253695, y: 35.552337, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.254263, y: 35.556099, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.254353, y: 35.555071, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.254681, y: 35.553479, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.256182, y: 35.554402, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.256477, y: 35.557421, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.259715, y: 35.553741, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.259792, y: 35.41544, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.260286, y: 35.526001, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.260613, y: 35.554493, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.260828, y: 35.555135, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.260854, y: 35.552683, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.261069, y: 35.55524, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.261101, y: 35.553084, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.261722, y: 35.554465, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.261837, y: 35.556549, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.264022, y: 35.409165, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.264175, y: 35.407401, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.265301, y: 35.587114, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.265777, y: 35.623985, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.266266, y: 35.585461, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.270312, y: 35.420346, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.271393, y: 35.516661, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.273161, y: 35.429887, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.273976, y: 35.403065, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.275023, y: 35.614986, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.275583, y: 35.39441, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.276498, y: 35.61292, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.277909, y: 35.41252, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.278095, y: 35.413092, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.278725, y: 35.43219, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.279334, y: 35.412354, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.279586, y: 35.417803, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.279696, y: 35.415267, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.279853, y: 35.414182, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.280178, y: 35.434134, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.280422, y: 35.415952, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.280533, y: 35.417612, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.280952, y: 35.604293, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.281102, y: 35.412048, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.281121, y: 35.410969, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.281123, y: 35.41349, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.281319, y: 35.434741, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.281366, y: 35.420369, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.281642, y: 35.407155, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.281816, y: 35.417471, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.282181, y: 35.408855, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.282276, y: 35.436294, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.282635, y: 35.417851, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.282798, y: 35.407333, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283244, y: 35.409213, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283301, y: 35.409282, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283301, y: 35.409282, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283485, y: 35.413762, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283755, y: 35.408043, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283761, y: 35.408431, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283811, y: 35.413625, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283811, y: 35.413625, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.283909, y: 35.414949, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.284048, y: 35.410097, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.284205, y: 35.378061, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.284251, y: 35.407833, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.284251, y: 35.407833, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.284655, y: 35.506944, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.284686, y: 35.407414, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.285146, y: 35.411988, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.285171, y: 35.479828, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.285343, y: 35.40664, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.285744, y: 35.485549, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.286075, y: 35.405382, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286181, y: 35.40938, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286219, y: 35.405908, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286468, y: 35.405973, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286468, y: 35.405973, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286607, y: 35.404937, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286749, y: 35.409777, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.286807, y: 35.437894, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.287135, y: 35.407491, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.287277, y: 35.409475, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.287324, y: 35.649097, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.287644, y: 35.407688, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.287644, y: 35.407688, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.287695, y: 35.406488, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.287794, y: 35.409746, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.287967, y: 35.407837, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.288323, y: 35.411106, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.288463, y: 35.406791, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.288653, y: 35.413941, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.289081, y: 35.408469, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.289433, y: 35.405245, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.289467, y: 35.40977, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.289928, y: 35.406424, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.290251, y: 35.459735, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.290289, y: 35.419195, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.290478, y: 35.409783, z: 0, h: 300, p: 0, r: 0},
                // {x: 129.290769, y: 35.408621, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.290968, y: 35.34237, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.291004, y: 35.457998, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.291101, y: 35.456027, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.291137, y: 35.466265, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.291271, y: 35.409862, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.2919, y: 35.343552, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.29197, y: 35.458888, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.29235, y: 35.494705, z: 0, h: 330, p: 0, r: 0},
                // {x: 129.292492, y: 35.46703, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.292671, y: 35.487643, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.294793, y: 35.408232, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.294891, y: 35.408631, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.294978, y: 35.350084, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.295406, y: 35.351302, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.2955, y: 35.349424, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.298531, y: 35.48742, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.298637, y: 35.486461, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.3016, y: 35.405955, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.302039, y: 35.485852, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.302884, y: 35.484292, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.302884, y: 35.484292, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.303023, y: 35.43965, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.303867, y: 35.344337, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.303964, y: 35.487354, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.304149, y: 35.440324, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304332, y: 35.439391, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304452, y: 35.437369, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.30451, y: 35.436549, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304537, y: 35.484034, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304618, y: 35.438621, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304736, y: 35.488804, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304851, y: 35.485547, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304868, y: 35.439999, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.304872, y: 35.491421, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.305485, y: 35.438587, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.305591, y: 35.4393, z: 0, h: 150, p: 0, r: 0},
                // {x: 129.305681, y: 35.429972, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.305734, y: 35.432171, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.305746, y: 35.432245, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.305853, y: 35.435358, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.30594, y: 35.442063, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.305979, y: 35.432364, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306125, y: 35.436006, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.306126, y: 35.487969, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306126, y: 35.487969, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.306248, y: 35.497267, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.30639, y: 35.429031, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306416, y: 35.43972, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.306519, y: 35.437268, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306573, y: 35.493011, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306598, y: 35.489827, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306674, y: 35.483051, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306729, y: 35.491404, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.306955, y: 35.48614, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.307133, y: 35.427225, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.307257, y: 35.428472, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.30729, y: 35.430001, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.307904, y: 35.427562, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308021, y: 35.437387, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.308299, y: 35.431971, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308334, y: 35.413437, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.308402, y: 35.430514, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308445, y: 35.488858, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308553, y: 35.439388, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308658, y: 35.427896, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308661, y: 35.434069, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308807, y: 35.429894, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.308868, y: 35.432137, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309012, y: 35.436516, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.309054, y: 35.428569, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309109, y: 35.429914, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309137, y: 35.487236, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309168, y: 35.427532, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309246, y: 35.488258, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309303, y: 35.437627, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309579, y: 35.430872, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309613, y: 35.434451, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309646, y: 35.434742, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.30965, y: 35.434123, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309873, y: 35.433692, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.309873, y: 35.433692, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.309993, y: 35.426686, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.310015, y: 35.486037, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310104, y: 35.4284, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310198, y: 35.430102, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310368, y: 35.439241, z: 0, h: 60, p: 0, r: 0},
                // {x: 129.310372, y: 35.436049, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310461, y: 35.435101, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310529, y: 35.437556, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.31057, y: 35.429506, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310656, y: 35.432677, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.31066, y: 35.433733, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310753, y: 35.432501, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310828, y: 35.425952, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.310969, y: 35.439783, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311003, y: 35.427493, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.311042, y: 35.487428, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311054, y: 35.433433, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311063, y: 35.432494, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.31111, y: 35.43422, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.311252, y: 35.410343, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.311274, y: 35.426081, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.311289, y: 35.437153, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311537, y: 35.435251, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311657, y: 35.488033, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311688, y: 35.431935, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311711, y: 35.435428, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.31186, y: 35.433685, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.311882, y: 35.432813, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.311924, y: 35.435149, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.311962, y: 35.351931, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.312066, y: 35.434449, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.312341, y: 35.438639, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.312343, y: 35.487302, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.312704, y: 35.427881, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.31274, y: 35.433532, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.312869, y: 35.435205, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.312907, y: 35.345818, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.313225, y: 35.436774, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.313225, y: 35.487851, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.313295, y: 35.425899, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.313394, y: 35.433175, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.313458, y: 35.427962, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.314781, y: 35.428597, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.314936, y: 35.434864, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.315731, y: 35.351674, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.315869, y: 35.426474, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.316468, y: 35.440563, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.318766, y: 35.358301, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.318903, y: 35.364128, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.318971, y: 35.393941, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.319341, y: 35.423034, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.32152, y: 35.468366, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.321568, y: 35.357433, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.322414, y: 35.405691, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.323294, y: 35.405651, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.324484, y: 35.434813, z: 0, h: 90, p: 0, r: 0},
                // {x: 129.324681, y: 35.354703, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.324767, y: 35.434741, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.32588, y: 35.357357, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.326886, y: 35.350526, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.327059, y: 35.349729, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.332732, y: 35.392279, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.333063, y: 35.466971, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.333838, y: 35.397538, z: 0, h: 270, p: 0, r: 0},
                // {x: 129.334215, y: 35.356494, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.334544, y: 35.441616, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.336249, y: 35.39608, z: 0, h: 120, p: 0, r: 0},
                // {x: 129.336719, y: 35.434485, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.340553, y: 35.387675, z: 0, h: 30, p: 0, r: 0},
                // {x: 129.340671, y: 35.385349, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.340895, y: 35.381202, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.341501, y: 35.384518, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.342049, y: 35.386063, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.342633, y: 35.386968, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.342692, y: 35.383728, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.343309, y: 35.38386, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.344029, y: 35.383541, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.344603, y: 35.385513, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.344711, y: 35.385479, z: 0, h: 360, p: 0, r: 0},
                // {x: 129.345079, y: 35.384006, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.346212, y: 35.388477, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.346707, y: 35.353575, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.350006, y: 35.370422, z: 0, h: 210, p: 0, r: 0},
                // {x: 129.350104, y: 35.373819, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.353498, y: 35.367683, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.353801, y: 35.369711, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.35522, y: 35.359675, z: 0, h: 180, p: 0, r: 0},
                // {x: 129.358461, y: 35.364226, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.359376, y: 35.41832, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.359556, y: 35.356358, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.360165, y: 35.360542, z: 0, h: 0, p: 0, r: 0},
                // {x: 129.360165, y: 35.360542, z: 0, h: 90, p: 0, r: 0},
            ],
        }

        const moveToPosition = {
            loc1: {
                x: -3285575.519104196, 
                y: 4022715.2632463034, 
                z: 3689544.355759847,
                h: 3.0910095315989667,
                p: -0.9251189417221704,
                r: 6.283185243210086
            },
            loc2: {
                x: -3285377.5799360895, 
                y: 4022569.315075786, 
                z: 3689920.0358006014, 
                h: 2.0665965324838336, 
                p: -1.2570368255608177,
                r: 8.484895079874377e-7
            },
            loc3: {
                x: -3285457.799469344, 
                y: 4022365.4207833786, 
                z: 3690113.5846610274, 
                h: 4.2548152526025795, 
                p: -0.5814656522165671,
                r: 0.0000029172188451553893
            },
        }

        const _dataSourceCCTV = new Cesium.CustomDataSource("CCTV");
        const _dataSourcePoint = new Cesium.CustomDataSource("point");
        const _dataSourceCone = new Cesium.CustomDataSource("Cone");
        const _dataSourceLOS = new Cesium.CustomDataSource("LOS");
        const _dataSourceRED = new Cesium.CustomDataSource("RED");
        viewer.dataSources.add(_dataSourceCCTV);
        viewer.dataSources.add(_dataSourcePoint);
        viewer.dataSources.add(_dataSourceCone);
        viewer.dataSources.add(_dataSourceLOS);
        viewer.dataSources.add(_dataSourceRED);

        const moveTo = (key) => {
            flyTo(moveToPosition[key]);
        }
        
        const loadModel = (assetId) => {
            return Cesium.IonResource.fromAssetId(assetId);
        }

        // CCTV 객체 
        const loadCCTV = async () => {
            const resource = await loadModel(model.assetId);

            // CCTV 위치를 확인하고, GLFT 모델을 올리는 부분
            for (let index = 0; index < model.dataList.length; index++) {
                const data = model.dataList[index];
                const position = Cesium.Cartesian3.fromDegrees(data.x, data.y);
                const positionWithTerrain = await newCartesianWithTerrain(position);
                const heading = Cesium.Math.toRadians(CCTV_DEFAULT_DEGREE+data.h);
                const hpr = new Cesium.HeadingPitchRoll(heading, data.p, data.r);
                const orientation = Cesium.Transforms.headingPitchRollQuaternion(positionWithTerrain, hpr);

                // CCTV 모델
                addModelEntity(_dataSourceCCTV, resource, positionWithTerrain, orientation);

			    // 높이 TEST 용 - 파란색 점
                addPointEntity(_dataSourcePoint, positionWithTerrain, Cesium.Color.BLUE);
            }
        }

        // 노란색 조명
        const loadCone = () => {
            clearCone();

            // 전체 CCTV On
            const cctvEntities = _dataSourceCCTV.entities.values;
            for (let index = 0; index < cctvEntities.length; index++) {
                const entity = cctvEntities[index];
                computeCircle(entity, (array) => {
                    const hierarchy = new Cesium.PolygonHierarchy(array);
                    addPolygonEntity(_dataSourceCone, hierarchy);
                });
            }
        }

        // Line Of Sight
        const loadLOS = () => {
            clearLOS();

            if(selectedCCTV) {
                computeCircle(selectedCCTV, (array) => {
                    const [bottomPosition, topPosition] = array;
                    addLOSEntity(_dataSourceLOS, topPosition, bottomPosition)
                });
            }
        }

        // 조명과 LOS의 좌표 계산
        const computeCircle = async (entity, callback) => {
            // CCTV 모델의 clampToGround 된 위치 구하기
            const position = entity.position.getValue(viewer.clock.currentTime);
            const clampToGroundPosition = await newCartesianWithTerrain(position);
            const hpr = Cesium.HeadingPitchRoll.fromQuaternion(entity.orientation.getValue(), new Cesium.HeadingPitchRoll(0,0,0));
            const heading = Cesium.Math.toDegrees(hpr.heading);
            const carto = viewer.scene.globe.ellipsoid.cartesianToCartographic(clampToGroundPosition);
            const lon = Cesium.Math.toDegrees(carto.longitude);
            const lat = Cesium.Math.toDegrees(carto.latitude);
            const height = carto.height;
            
            // 조명의 위치
            const topPosition = geoMove(lon, lat, height + CCTV_HEIGHT, heading - 80, LENS_DISTANCE);
            const centerPosition = geoMove(lon, lat, height, heading - 80, MOVE_DISTANCE);
            const center = await newCartesianWithTerrain(centerPosition, 0, 0, 0);
            const circlePositions = await getCircleBoundries(center, CIRCLE_RADIUS, CIRCLE_DENSITY);
            
            // 위치 확인용 - 빨간색 점
            addPointEntity(_dataSourceRED, center);

            let positionArray = [];
            for (let i = 0; i < circlePositions.length; i++) {
                let j = i + 1 < circlePositions.length ? i + 1 : 0;
                positionArray.push([circlePositions[i], topPosition, circlePositions[j]]);
            }
            
            for (let k = 0; k < positionArray.length; k++) {
                callback(positionArray[k]);
            }
        }
        
        const addModelEntity = (datasource, resource, position, orientation) => {
            datasource.entities.add({
                model: {
                    uri: resource,
                    //heightReference: Cesium.HeightReference.CLAMP_TO_GROUND
                },
                position: position,
                orientation: orientation,
                type: "cctv"
            });
        }

        const addPointEntity = (datasource, position, color = Cesium.Color.RED) => {
            datasource.entities.add({
                point: {
                    pixelSize: 5,
                    color: color,
                    outlineColor: Cesium.Color.WHITE,
                    outlineWidth: 2,
                },
                position: position,
            });
        }

        const addPolyLineEntity = (datasource, position1, position2, width, material, visibleDepthFail = false) => {
            // PolylineGraphics
            datasource.entities.add({
                polyline: {
                    positions: [position1, position2],
                    arcType: Cesium.ArcType.NONE,
                    width: width,
                    material: material,
                    depthFailMaterial: visibleDepthFail ? material : null,
                },
            });
        }
        
        const addPolygonEntity = (datasource, hierarchy) => {
            datasource.entities.add({
                polygon: {
                    hierarchy: hierarchy,
                    perPositionHeight: true,
                    outline: false,
                    material: Cesium.Color.fromAlpha(Cesium.Color.YELLOW, parseFloat(0.2)),
                }
            });
        }

        const addLOSEntity = (datasource, top, bottom) => {
            const difference = Cesium.Cartesian3.subtract(bottom, top, new Cesium.Cartesian3());
            const direction = Cesium.Cartesian3.normalize(difference, new Cesium.Cartesian3());
            const ray = new Cesium.Ray(top, direction);
            const objectsToExclude = [
                ..._dataSourceCCTV.entities.values,
                ..._dataSourceCone.entities.values, 
                ..._dataSourceLOS.entities.values, 
            ];
            const result = viewer.scene.pickFromRay(ray, objectsToExclude);

            if (result && result?.position) {
                const successMaterial = new Cesium.PolylineGlowMaterialProperty({
                    color: Cesium.Color.GREEN,
                    glowPower: 0.05,
                });
                const failMaterial = new Cesium.PolylineOutlineMaterialProperty({
                    color: Cesium.Color.RED.withAlpha(0.5),
                    outlineWidth: 0
                });
                addPolyLineEntity(datasource, top, result.position, 30, successMaterial);
                addPolyLineEntity(datasource, result.position, bottom, 3, failMaterial, true);
            }
        }

        const clearCone = () => {
            _dataSourceRED.entities.removeAll();
            _dataSourceCone.entities.removeAll();
        }

        const clearLOS = () => {
            _dataSourceRED.entities.removeAll();
            _dataSourceLOS.entities.removeAll();
        }
        
        const newCartesianWithTerrain = async (position, a = 0, b = 0, c = 0) => {
            const cartographicLocation = Cesium.Cartographic.fromCartesian(position);
            return await Cesium.sampleTerrainMostDetailed(viewer.terrainProvider, [cartographicLocation])
                .then(function (updatedLocation) {
                    // 높이 정보가 업데이트된 cartographicLocation을 Cartesian3 형태로 변환한다.
                    const updatedCartesianLocation = Cesium.Cartesian3.fromRadians(
                        updatedLocation[0].longitude,
                        updatedLocation[0].latitude,
                        updatedLocation[0].height
                    );
                    return updatedCartesianLocation;
            });
        }

        const geoMove = (lon, lat, height, degree, distance) => {
            const x = Cesium.Math.toRadians(lon);
            const y = Cesium.Math.toRadians(lat);
            const radian = Cesium.Math.toRadians(degree);
            const length = distance / FACTOR;   // 단위: km

            const moveY = Math.asin(Math.sin(y) * Math.cos(length) + Math.cos(y) * Math.sin(length) * Math.cos(radian));
            const moveX = x + Math.atan2(Math.sin(radian) * Math.sin(length) * Math.cos(y), Math.cos(length) - Math.sin(y) * Math.sin(moveY));

            const moveLon = Cesium.Math.toDegrees(moveX);
            const moveLat = Cesium.Math.toDegrees(moveY);

            return Cesium.Cartesian3.fromDegrees(moveLon, moveLat, height);
        }

        const getCircleBoundries = async (center, radius, density = 0.009) => {
            const ellipsePositions = Cesium.EllipseGeometryLibrary.computeEllipsePositions({
                center: center,
                semiMajorAxis: radius,
                semiMinorAxis: radius,
                rotation: 0,
                granularity: density,
            }, false, true);    //options, addFillPositions, addEdgePositions

            if (!ellipsePositions || !ellipsePositions.outerPositions) {
                return [];
            }

            const points = Cesium.Cartesian3.unpackArray(ellipsePositions.outerPositions);
            const editPoints = await Promise.all(
                points.map(element => newCartesianWithTerrain(element, 0, 0, 0))
            )
            
            editPoints[editPoints.length] = editPoints[0];  // first point
            return editPoints;
        }

        const rotate = (sign) => {
            const moveDegree = Number(document.getElementById("moveDegree").value) || 0;
            document.getElementById("moveDegreeHidden").value = moveDegree;

            const originPosition = selectedCCTV.position.getValue();
            const originOrientation = selectedCCTV.orientation.getValue();  // Quaternion

            const originHPR = Cesium.HeadingPitchRoll.fromQuaternion(originOrientation, new Cesium.HeadingPitchRoll(0,0,0));
            const originHeading = Cesium.Math.toDegrees(originHPR.heading);
            const newHeading = Cesium.Math.toRadians(moveDegree*sign*(-1)); // 변경할 heading 값 (라디안으로 변환)

            const axis = new Cesium.Cartesian3(0, 0, 1); // 회전 축 (Z축 기준으로 회전)
            const rotationQuaternion = Cesium.Quaternion.fromAxisAngle(axis, newHeading); // 회전 Quaternion 생성
            const newOrientation = Cesium.Quaternion.multiply(originOrientation, rotationQuaternion, new Cesium.Quaternion(0, 0, 0, 0)); // 현재 Quaternion에 회전 적용
            
            selectedCCTV.orientation.setValue(newOrientation);

            loadLOS();
        }

        const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
        handler.setInputAction((movement) => {
            let pickedFeature = viewer.scene.pick(movement.position);
            if(Cesium.defined(pickedFeature)) {
                const pickedCCTV = _dataSourceCCTV.entities.values.find((cctv) => cctv === pickedFeature.id);
                selectedCCTV = pickedCCTV || null;
                changeUI();
                if(selectedCCTV) {
                    loadLOS();
                }
            } else {
                if(selectedCCTV) {
                    selectedCCTV = null;
                    clearLOS();
                    changeUI();
                }
            }
        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

        const changeUI = () => {
            const selectedInfo = document.getElementById("selected-cctv");
            const notSelectedInfo = document.getElementById("not-selected-cctv");

            if(selectedCCTV) {
                selectedInfo.style.display = "block";
                notSelectedInfo.style.display = "none";
            } else {
                selectedInfo.style.display = "none";
                notSelectedInfo.style.display = "block";
            }
        }

        const addCCTV = async () => {
            const lon = document.getElementById("addLon").value;
            const lat = document.getElementById("addLat").value;

            loadCCTVOnly(lon, lat);
            // const position = Cesium.Cartesian3.fromDegrees(lon, lat);
            // const positionWithTerrain = await newCartesianWithTerrain(position);

            viewer.camera.flyTo({
                destination : Cesium.Cartesian3.fromDegrees(lon, lat,  100)
            });
        }

        const loadCCTVOnly = async (lon, lat) => {
            const resource = await loadModel(model.assetId);

            const position = Cesium.Cartesian3.fromDegrees(lon, lat);
            const positionWithTerrain = await newCartesianWithTerrain(position);
            const heading = Cesium.Math.toRadians(CCTV_DEFAULT_DEGREE+0);
            const hpr = new Cesium.HeadingPitchRoll(heading, 0, 0);
            const orientation = Cesium.Transforms.headingPitchRollQuaternion(positionWithTerrain, hpr);

            // CCTV 모델
            addModelEntity(_dataSourceCCTV, resource, positionWithTerrain, orientation);

            // 높이 TEST 용 - 파란색 점
            addPointEntity(_dataSourcePoint, positionWithTerrain, Cesium.Color.BLUE);
        }

        const getCenter = () => {
            const p = viewer.camera.position;
            const ellipsoid = Cesium.Ellipsoid.WGS84;
            const cartographic = ellipsoid.cartesianToCartographic(p);
            const longitude = Cesium.Math.toDegrees(cartographic.longitude);
            const latitude = Cesium.Math.toDegrees(cartographic.latitude);
            const m = {x: p.x, y: p.y, z: p.z, h: viewer.camera.heading, p: viewer.camera.pitch, r: viewer.camera.roll}
            console.log(m);
            console.log(longitude, latitude);
        }

        const saveUserPosition = () => {
            const position = {
                x: viewer.camera.position.x,
                y: viewer.camera.position.y,
                z: viewer.camera.position.z,
                h: viewer.camera.heading,
                p: viewer.camera.pitch,
                r: viewer.camera.roll 
            }
            window.localStorage.setItem("position", JSON.stringify(position));
        }

        const deleteUserPosition = () => {
            window.localStorage.removeItem("position");
        }

        const getUserPosition = () => {
            return JSON.parse(window.localStorage.getItem("position"));
        }

        const flyTo = (location) => {
            const defaultPosition = {
                x: -3280686.756404731,
                y: 4045131.289152038,
                z: 3692117.0218876083,
                h: 0.8437411366659617,
                p: -0.9150366950557816,
                r: 0.0001398575659132817
            }

            const position = location || defaultPosition;
            viewer.camera.flyTo({
                destination : new Cesium.Cartesian3(position.x, position.y ,  position.z),
                orientation: {heading: position.h, pitch: position.p, roll: position.r}
            });
        }
        
        flyTo(getUserPosition());
        loadCCTV();

    </script>
    </div>
</body>

</html>